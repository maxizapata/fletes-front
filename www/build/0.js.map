{"version":3,"sources":["../../src/pages/rider-driver-map/rider-driver-map.module.ts","../../src/pages/rider-driver-map/rider-driver-map.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { RiderDriverMapPage } from './rider-driver-map';\n\n@NgModule({\n  declarations: [\n    RiderDriverMapPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(RiderDriverMapPage),\n  ],\n})\nexport class RiderDriverMapPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/rider-driver-map/rider-driver-map.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { Geolocation } from '@ionic-native/geolocation';\nimport { TripProvider } from '../../providers/trip/trip';\nimport { WebsocketProvider } from '../../providers/websocket/websocket';\nimport { UserProvider } from '../../providers/user/user';\ndeclare var google;\n\n@IonicPage()\n@Component({\n  selector: 'page-rider-driver-map',\n  templateUrl: 'rider-driver-map.html',\n})\nexport class RiderDriverMapPage {\n\n  constructor(public navCtrl: NavController, \n              public navParams: NavParams,\n              public trip: TripProvider,\n              public geolocation: Geolocation,\n              public user: UserProvider,\n              public ws: WebsocketProvider) {\n  }\n\n  ionViewDidLoad(){\n\n  }\n\n  whereIsTheDriver(){\n    let data = {\n      trip: this.trip.id,\n      rider: this.user.id\n    }\n    this.ws.sendMsg(\n      'where_is_the_driver',\n      data\n      )\n  }\n\n  myLocation: any;  \n  getPosition(){\n    this.geolocation.getCurrentPosition().then(response => {\n      this.calculateAndDisplayRoute(response.coords.latitude, \n        response.coords.longitude)\n    })\n  }\n\n  calculateAndDisplayRoute(myLat, myLng) {\n    let that = this;\n    let directionsService = new google.maps.DirectionsService;\n    let directionsDisplay = new google.maps.DirectionsRenderer;\n    const map = new google.maps.Map(document.getElementById('map-route'), {\n      zoom: 10,\n      center: {lat: myLat, lng: myLng}\n    });\n    directionsDisplay.setMap(map);\n\n    var pos = {\n      lat: myLat,\n      lng: myLng,\n    };\n    map.setCenter(pos);\n    that.myLocation = new google.maps.LatLng(pos);\n\n    directionsService.route({\n      //origin: this.origin,\n      //destination: this.destination,\n      origin: this.trip.pick_up,\n      destination: this.trip.pick_up,\n      travelMode: 'DRIVING'\n    }, \n    function(response, status) {\n      if (status === 'OK') {\n        console.log('status ok')\n        directionsDisplay.setDirections(response);\n        console.log(response)\n      } \n      else {\n        console.log('status error')\n        window.alert('Error al obtener direcci√≥n' + status);\n      }\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/rider-driver-map/rider-driver-map.ts"],"sourceRoot":""}